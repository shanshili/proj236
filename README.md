#  ğŸŒˆğŸŒˆlinuxå†…æ ¸å®‰è£…

## ç›®å½•ğŸŒ³
1. [ä»‹ç»](#ä»‹ç»)âœˆï¸
2. [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)âœˆï¸
3. [ä¸‹è½½å†…æ ¸æºç ](#ä¸‹è½½å†…æ ¸æºç )âœˆï¸
4. [é…ç½®å†…æ ¸](#é…ç½®å†…æ ¸)âœˆï¸
5. [ç¼–è¯‘å†…æ ¸](#ç¼–è¯‘å†…æ ¸)âœˆï¸
6. [å®‰è£…å†…æ ¸](#å®‰è£…å†…æ ¸)âœˆï¸
7. [éªŒè¯å®‰è£…](#éªŒè¯å®‰è£…)âœˆï¸

## ä»‹ç»ğŸŒ³
***OpenWrt x86_64 è™šæ‹Ÿæœºé•œåƒï¼ˆEFI ç‰ˆæœ¬ï¼‰***

***å†…æ ¸ç‰ˆæœ¬ï¼šLinux 5.15.134***

***OpenWrt ç‰ˆæœ¬ï¼š23.05.0***

***æ„å»ºæ—¶é—´ï¼š2025å¹´6æœˆ***

***ä½œè€…ï¼šCanhui Bao***



## æ–‡ä»¶è¯´æ˜ğŸŒ³

æœ¬å‹ç¼©åŒ…åŒ…å«ä¸€ä¸ªå¯ç›´æ¥ç”¨äº VMware çš„ OpenWrt x86_64 EFI è™šæ‹Ÿæœºé•œåƒï¼Œé€‚åˆè¿›è¡Œå¼€å‘è°ƒè¯•ä¸éƒ¨ç½²ã€‚

å‹ç¼©åŒ…åç§°ï¼š
    openwrt_vm_efi_package.tar.gz

è§£å‹åå†…å®¹ï¼š
    - openwrt-x86-64-generic-ext4-combined-efi.vmdk  â†’ VMware è™šæ‹Ÿç£ç›˜é•œåƒ
        - README.txt                                     â†’ ä½¿ç”¨è¯´æ˜
    - .config                                              â†’ OpenWrt ç¼–è¯‘é…ç½®æ–‡ä»¶ï¼ˆä¾›å¤ç°ä½¿ç”¨ï¼‰



## å‰ææ¡ä»¶ğŸŒ³
åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š
- ä¸€å°å·²ç»å®‰è£…äº† Linux æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿæœºï¼ˆæœ¬æ•™ç¨‹ä»¥ Ubuntu24ç‰ˆæœ¬ ä¸ºä¾‹ï¼‰ã€‚
- å…·å¤‡ sudo æƒé™çš„ç”¨æˆ·å¸æˆ·ã€‚
- è¶³å¤Ÿçš„ç¡¬ç›˜ç©ºé—´ç”¨äºå­˜æ”¾ç¼–è¯‘åçš„å†…æ ¸æ–‡ä»¶ã€‚
- éœ€è¦åˆ‡æ¢å›½å†…çš„è½¯ä»¶æºğŸƒ[å‚è€ƒè¯¥åšä¸»](https://blog.csdn.net/Zzp750/article/details/145771731?ops_request_misc=&request_id=&biz_id=102&utm_term=Ubuntu24%E6%8D%A2%E5%8E%9F&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-145771731.142^v102^control&spm=1018.2226.3001.4187)
- å®‰è£…äº†ä¸€äº›å¿…è¦çš„ä¾èµ–å·¥å…·ï¼ˆå¦‚ `gcc`ã€`make`ã€`libncurses-dev` ç­‰ï¼‰ã€‚
- ä¾‹å¦‚ï¼šåœ¨ Ubuntu ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€éœ€çš„å¼€å‘å·¥å…·å’Œåº“ï¼š
  ```bash
  sudo apt update
  sudo apt install build-essential libncurses-dev bison flex libssl-dev libelf-dev bc

## ä¸‹è½½å†…æ ¸æºç ğŸŒ³
- ä¸‹è½½å†…æ ¸æºç å‰å¯ä»¥å…ˆåœ¨è™šæ‹Ÿæœºä¸Šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜ä¸‹è½½çš„å®‰è£…åŒ… æ–¹ä¾¿ä»¥åæŸ¥è¯¢ã€‚
    ```bash
    makedir /ä½ çš„æ–‡ä»¶å
- å¯ä»¥ç›´æ¥å»ğŸƒ[linuxæºç å®˜ç½‘](https://www.kernel.org/)ä¸‹è½½å¯¹åº”linuxç‰ˆæœ¬ï¼ˆè¿™é‡Œé‡‡ç”¨linux5.15.134ï¼‰
- æˆ–è€…ç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
    ```bash
    sudo apt update
    sudo apt install linux-image-5.15.134

## é…ç½®å†…æ ¸ğŸŒ³
-  ä½¿ç”¨`make menuconfig`å¯¹å†…æ ¸è¿›è¡Œå›¾å½¢åŒ–é…ç½®
    ```bash
      make menuconfig
## ç¼–è¯‘å†…æ ¸ğŸŒ³
-  ä½¿ç”¨`make `å¯¹å†…æ ¸è¿›è¡Œç¼–è¯‘,å…¶ä¸­xå¯ä»¥æ ¹æ®è‡ªå·±çš„cpuè®¾ç½®
      ```bash
     make  -jx
-  äº¦å¯ç›´æ¥å¤åˆ¶å¦‚ä¸‹æŒ‡ä»¤
     ```bash
     make -j$(nproc) 
-  `-j$(nproc)` ä¼šè®©ç¼–è¯‘ä½¿ç”¨ç³»ç»Ÿä¸Šæ‰€æœ‰çš„ CPU æ ¸å¿ƒï¼Œè¿™æ ·ä¼šåŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚å¦‚æœä½ åªæƒ³ä½¿ç”¨ä¸€ä¸ªæ ¸å¿ƒï¼Œç§»é™¤ `-j$(nproc)` å³å¯ã€‚
## å®‰è£…å†…æ ¸ğŸŒ³ 
-  å¤åˆ¶å¦‚ä¸‹æŒ‡ä»¤
     ```bash
     sudo make modules_install
     sudo make install
-  å¯ä»¥æ£€æŸ¥è‡ªå·±å®‰è£…çš„æ¨¡å—æ˜¯å¦åœ¨`lib`ä¸‹é¢
     ```bash
     cd /lib/modules
     ls

## éªŒè¯å®‰è£…ğŸŒ³
-  åœ¨æ‰§è¡Œ`sudo make install` åä¼šè‡ªåŠ¨æ›´æ–°`grub`å¯ä»¥ä¸åšæ‰‹åŠ¨æ›´æ–°
-  é‡å¯ç³»ç»Ÿé»˜è®¤ä¼šåˆ‡æ¢åˆ°æœ€æ–°çš„å†…æ ¸ ,ä¹Ÿå¯ä»¥åœ¨å¯åŠ¨ç•Œé¢æ‰‹åŠ¨è¿›å…¥é«˜çº§é€‰é¡¹é€‰æ‹©å†…æ ¸ï¼Œè¿›å…¥ç³»ç»Ÿä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬
    ```bash
     uname -a
-  ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹ç”µè„‘å·²ç»å®‰è£…çš„å†…æ ¸
    ```bash
     dpkg --get-selections|grep linux

## å¸¸è§é—®é¢˜ğŸŒ³
-  1.åœ¨å®‰è£…å†…æ ¸ä»¥åä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªé…ç½®å¼•å¯¼ç¨‹åº`grub `æˆ‘å¹¶æ²¡æœ‰åšè¯¥æ“ä½œğŸƒ[è¯¦æƒ…å‚è€ƒ](https://blog.csdn.net/ustczwc/article/details/9053803?ops_request_misc=&request_id=&biz_id=102&utm_term=Ubuntu24%E7%BC%96%E8%AF%91linux%E5%86%85%E6%A0%B8&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-3-9053803.142^v102^control&spm=1018.2226.3001.4187)
   



## ä½¿ç”¨æ­¥éª¤ï¼ˆVMware ç”¨æˆ·ï¼‰ğŸŒ³

1. æ‰“å¼€ VMware Workstation / Playerï¼Œé€‰æ‹© â€œæ–°å»ºè™šæ‹Ÿæœºâ€ã€‚
2. è™šæ‹Ÿæœºç±»å‹é€‰æ‹© â€œä½¿ç”¨ç°æœ‰è™šæ‹Ÿç£ç›˜â€ã€‚
3. æµè§ˆå¹¶åŠ è½½ `openwrt-x86-64-generic-ext4-combined-efi.vmdk`ã€‚
4. ç½‘ç»œå»ºè®®è®¾ç½®ä¸º â€œæ¡¥æ¥æ¨¡å¼ï¼ˆBridgedï¼‰â€ï¼Œç¡®ä¿è™šæ‹Ÿæœºä¸å®¿ä¸»æœºåŒç½‘æ®µã€‚
5. å¯åŠ¨è™šæ‹Ÿæœºã€‚

##  é»˜è®¤ç™»å½•ä¿¡æ¯

- **é»˜è®¤ IP åœ°å€**ï¼š192.168.1.1ï¼ˆé¦–æ¬¡å¯åŠ¨ï¼‰
- **ç”¨æˆ·å**ï¼šroot
- **å¯†ç **ï¼šæ— å¯†ç ï¼ˆç›´æ¥å›è½¦ï¼‰

å¯ä½¿ç”¨ Xshellã€MobaXtermã€SSH å·¥å…·è¿›è¡Œè¿œç¨‹è¿æ¥ï¼š

```bash
ssh root@192.168.1.1
```

ç”±äºå·²ç»é…ç½®DHCPè‡ªåŠ¨è·å–ä¸»æœºipåœ°å€ï¼Œæ•…å¯ç”±opwrtè™šæ‹Ÿæœº å‘½ä»¤æŸ¥çœ‹

```bash
ip a
```

ipåœ°å€ï¼š192.168.31.18ï¼Œxshellé€šè¿‡sshå‘½ä»¤å³å¯è¿æ¥ä¸è™šæ‹Ÿæœºè¿æ¥

è‡³æ­¤ï¼Œæ‰€æœ‰å·¥ä½œå‡å·²å®Œæˆï¼Œå³å¯åŠ è½½å†…æ ¸æ¨¡å—ä»£ç è¿›è¡Œæµ‹è¯•
